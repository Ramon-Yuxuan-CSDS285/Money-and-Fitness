<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	
	<link rel="stylesheet" type="text/css" href="index.css">

	<title>Todo List App - Pure Coding</title>
</head>
<body>
	<div class="wrapper">
		<h2 class="title">Calculate Daily Calorie Intake</h2>
		<div class="inputFields">
			<form>
				<input type="text" id="name" placeholder="Enter your name">
				<input type="number" id="height" placeholder="Enter your height">
				<input type="number" id="weight" placeholder="Enter your weight">
				<br>
				<button type="submit" id="addBtn" class="btn">Submit</button>
				<!-- <button type="submit" id="get" class = "btn" style="float:right; margin-left: 10%;">get weight and height</button> -->
			</form>
		</div>
		<div id="metric">

		</div>
		<br>
		<br>
		<div class="inputFields">
			<form class="foodList">
				<input type="text" id="typeOfFood" placeholder="Enter Name of Food">
				<input type="number" id="calorie" placeholder="Enter the amount of calories">
				<br>
				<button type="submit" id="submitFoodList" class="btn">Submit</button>
			</form>
		</div>
		<div class="content">
			<!-- <span class="text">food</span>
			<span class="text">calorie</span> -->
			<ul id="tasks">
			
			</ul>
			<div id="calorieSum">

			</div>
		</div>
	</div>

	<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
	<script>
		$(document).ready(function() {


			// Show Tasks
			function loadTasks() {
				$.ajax({
					url: "show-food.php",
					type: "POST",
					success: function(data) {
						$("#tasks").html(data);
					}
				});
			}

			//show total calories
			function loadTotalCalories() {
				$.ajax({
					url: "show-sum.php",
					type: "POST",
					success: function(data) {
						$("#calorieSum").html(data);
					}
				});
			}


			// Add Task
			$("#submitFoodList").on("click", function(e) {
				e.preventDefault();

				var calorie = $("#calorie").val();
				var typeOfFood = $("#typeOfFood").val();

				$.ajax({
					url: "add-food.php",
					type: "POST",
					data: {food : typeOfFood, calorie: calorie},
					success: function(data) {
						loadEverything();
						$("#calorie").val('');
						$("#typeOfFood").val('');
						if (data == 0) {
							alert("Something wrong went. Please try again.");
						}
					}
				});
			});

			function loadEverything() {
				loadTasks();
				loadTotalCalories();
				loadMetrics();
			}

			loadEverything();

			//show weight and height
			function loadMetrics() {
				$.ajax({
					url: "show-metric.php",
					type: "POST",
					success: function(data) {
						$("#metric").html(data);
					}
				});
			}

			//add weight and height
			$("#addBtn").on("click", function(e) {
				e.preventDefault();

				var weight = $("#weight").val();
				var height = $("#height").val();
				var name = $("#name").val();

				$.ajax({
					url: "add-metric.php",
					type: "POST",
					data: {weight : weight, height: height, name: name},
					success: function(data) {
						loadEverything();
						$("#weight").val('');
						$("#height").val('');
						$("#name").val('');
						if (data == 0) {
							alert("Something wrong went. Please try again.");
						}
					}
				});
			});
			
			// Remove Task
			$(document).on("click", "#removeBtn", function(e) {
				e.preventDefault();
				var id = $(this).data('id');
				
				$.ajax({
					url: "remove-food.php",
					type: "POST",
					data: {id: id},
					success: function(data) {
						loadEverything();
						if (data == 0) {
							alert("Something wrong went. Please try again.");
						}
					}
				});
			});
		});
	</script>
</body>
</html>